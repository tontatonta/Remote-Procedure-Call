# RPC（Remote Procedure Call）クライアントとサーバーの通信

## 説明
このリポジトリには、2つのスクリプト「rpc_clients.js」と「rpc_server.py」が含まれており、JavaScriptで書かれたクライアントがPythonで書かれたサーバーとTCPソケットを使用して単純なRPC通信を実装しています。JavaScriptで書かれたクライアントは、Pythonで書かれたサーバーと通信します。クライアントはメソッド名、パラメータ、およびIDを含むリクエストをサーバーに送信します。サーバーはメソッド名に基づいてリクエストを処理し、結果とIDを返します。

## ファイル

### rpc_clients.js
このファイルには、クライアント側のJavaScriptコードが含まれています。

#### 依存関係
- `net`: TCPクライアントを作成するNode.jsモジュール。
- `readline`: コマンドラインからユーザー入力を読み取るNode.jsモジュール。

#### 使用方法
1. まずサーバーを実行します（`rpc_server.py`）。
2. クライアントスクリプトを実行します（`rpc_clients.js`）。
3. プロンプトに従って、メソッド名、パラメータ、およびIDを入力します。
4. クライアントがリクエストをサーバーに送信し、応答を受信すると、結果とIDが表示されます。

### rpc_server.py
このファイルには、サーバー側のPythonコードが含まれています。

#### 依存関係
- `socket`: ソケットプログラミングのためのPythonモジュール。
- `os`: オペレーティングシステムとのやり取りを行うPythonモジュール。
- `json`: JSONのシリアライズ/デシリアライズを行うPythonモジュール。
- `math`: 数学演算を行うPythonモジュール。

#### 使用方法
1. サーバースクリプトを実行します（`rpc_server.py`）。
2. サーバーはクライアントの接続を待ちます。
3. リクエストを受信すると、サーバーはメソッドとパラメータを処理し、結果をクライアントに送信します。
4. サーバーは新しい接続を待ち続けます。

## RPCメソッド
サーバーは以下のRPCメソッドを実装しています。
- `floor(x)`: x以下の最大の整数を返します。
- `nroot(n, x)`: xのn乗根を返します。
- `reverse(s)`: 入力文字列を逆にします。
- `validAnagram(a, b)`: 2つの文字列が有効なアナグラムであるかどうかをチェックします。
- `sort(s)`: 入力文字列の文字をソートします。

## 通信プロトコル
- クライアントとサーバーはTCPソケットを介して通信します。
- リクエストと応答はJSONを使用してシリアル化されます。
- クライアントからのリクエストには、次のものが含まれます。
  - `method`: 実行されるRPCメソッドの名前。
  - `params`: メソッドに必要なパラメータ。
  - `id`: リクエストの一意の識別子。
- サーバーからの応答には、次のものが含まれます。
  - `結果`: メソッドの実行結果。
  - `ID`: 対応するリクエストのID。

## 注意事項
- サーバースクリプトはローカルUNIXソケット（`rpc_file`）にバインドして通信します。
- 未定義のメソッドや無効な入力などのケースに対してエラーハンドリングが実装されています。
- クライアントスクリプトはユーザーからの入力をプロンプトで受け取り、リクエストをサーバーに送信します。
- 両方のスクリプトは手動で終了するまで無期限に実行されます。

